<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8"/>
        <!-- ë°˜ì‘í˜• ì›¹ ì„¤ì • -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <title>MyPage - ë°©ëª…ë¡</title>

        <!-- Firebase SDK -->
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

        <!-- Firebase ì´ˆê¸°í™” -->
        <script src="../assets/js/firebase-init.js"></script>

        <!-- ì™¸ë¶€ CSS -->
        <link rel="stylesheet" href="../assets/css/style.css" />

        <!-- Pretendard í°íŠ¸ ë¶ˆëŸ¬ì˜¤ê¸° -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
    </head>

    <body>
        <div class="wrapper">
            
            <!--  í—¤ë”  -->
            <header class="header">
                <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
                <nav class="nav-bar">
                    <a href="index.html">Home</a>
                    <a href="about.html">About</a>
                    <a href="contact.html">Contact</a>
                    <a href="guestbook.html" class="active">ë°©ëª…ë¡</a>
                </nav>
            </header>

            <!--  ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ -->
            <main>
                <!-- ë°©ëª…ë¡ -->
                <section class="guestbook">
                    <h2> âœğŸ»ë°©ëª…ë¡</h2>
                    <p>ë°©ëª…ë¡ ëª¨ì•„ë³´ê¸°<br>ë°©ëª…ë¡ì€ í™ˆ í™”ë©´ì—ì„œ ë‚¨ê²¨ì£¼ì„¸ìš”</p>
                    <!-- ë‚´ìš© js -->
                    <div class="guestbook-list" id="guestbook-list">
                    </div>

                </section>
            </main>

            <!--  í‘¸í„°  -->
            <footer class="footer">
                <p>@jungwonchae</p>
            </footer>

            <!-- js -->
            <script>
                // í‹°ìŠ¤í† ë¦¬ - https://manition.tistory.com/8 ì°¸ê³ 
                function copyToClipboard(val){
                    var t = document.createElement("textarea");
                    document.body.appendChild(t);
                    t.value = val;
                    t.select();
                    document.execCommand('copy');
                    document.body.removeChild(t);
                    alert("ì´ë©”ì¼ ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.ğŸ€");
                }

                // íŒŒì´ì–´ë² ì´ìŠ¤ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°.. ì§€í”¼í‹° ì°¸ê³ 
                db.collection("guestbook")
                .orderBy("createdAt", "desc")
                .get()
                .then((querySnapshot) => {
                const list = document.getElementById("guestbook-list");
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const li = document.createElement("li");

                    const date = data.createdAt?.toDate().toISOString().split("T")[0] ?? "ë‚ ì§œ ì—†ìŒ";

                    li.innerHTML = `
                    <strong>${data.name}</strong>
                    <span>${date}</span>
                    <p>${data.msg}</p>
                    `;
                    list.appendChild(li);
                    });
                });
            </script>

        </div>
    </body>
</html>